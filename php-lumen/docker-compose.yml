version: '3'

services:
  php-fpm: 
    container_name: php-fpm
    restart: always
    privileged: true
    build:
      context: ./
      dockerfile: ./php/Dockerfile
    volumes:
      - /Users/gaoyaqiu/git/vchangyi/crs-backend:/var/www/html
      - ./php/conf.d/docker-php-ext-xdebug.ini:/usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini
      - ./logs:/var/log/php
    networks:
     - dev-net

  nginx:
    depends_on:
      - php-fpm
    container_name: nginx
    restart: always
    build:
      context: ./nginx/
      dockerfile: Dockerfile
    ports:
      - 80:80
      - 443:443
    volumes:
      - ./logs:/var/log/nginx
    networks:
     - dev-net
networks:
  dev-net:
    driver: bridge

    
    